# Описание

Данный проект предоставляет API для работы с данными о погоде и городах. Он включает возможность добавления городов,
получения текущей погоды, прогноза на несколько дней и управления списком городов.

## Структура проекта

### 1. Контроллеры

CityController

Обрабатывает запросы, связанные с городами.

Эндпоинты:

POST /api/cities/add: Добавляет город в базу (если он существует).

GET /api/cities: Возвращает список всех добавленных городов с пагинацией.

PUT /api/cities/{cityId}: Обновляет данные города.

DELETE /api/cities/{cityId}: Удаляет город.
WeatherController

Обрабатывает запросы, связанные с погодой.

Эндпоинты:

GET /weather/current: Получает текущую погоду по cityId.

GET /weather/forecast: Получает прогноз погоды на указанное количество дней по cityId.

### 2. Сервисы

WeatherService

Обеспечивает взаимодействие с внешним API погоды и локальным хранилищем.

Основные методы:

getCityWeather(String cityName): Получает информацию о городе и сохраняет в базу.

getCurrentWeatherByCityId(int cityId): Возвращает текущую погоду (с использованием кэша Redis).

getCurrentForecast(int cityId, int days): Возвращает прогноз погоды (с использованием кэша Redis).

CityService

Управляет городами в базе данных.

Основные методы:

getAllCities(int page, int size): Возвращает список городов с пагинацией.

updateCity(int cityId, CityDto cityDto): Обновляет данные города.

deleteCity(int cityId): Удаляет город.


### 3. Репозитории

CityRepository: Управляет взаимодействием с таблицей городов в базе данных.

### 4. Кэширование (Redis)

Используется для хранения текущей погоды и прогноза, чтобы уменьшить количество запросов к внешнему API.

Ключи кэша:

weather:current:<cityId>: Текущая погода.

weather:forecast:<cityId>:<days>: Прогноз погоды.

### Запуск

Убедитесь, что база данных и Redis настроены и запущены.

Настройте параметры подключения к внешнему API погоды

Получите и вставте API ключ из https://www.weatherapi.com

docker-compose up -d 